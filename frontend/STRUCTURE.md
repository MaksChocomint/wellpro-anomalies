# Структура проекта WellPro после рефакторинга

## Сокращение кода

```
page.tsx
├── ДО:   835 строк (монолитный компонент)
└── ПОСЛЕ: 280 строк + разбивка на компоненты и хуки
```

## Древо файлов

```
frontend/
├── app/
│   ├── page.tsx              ← ГЛАВНЫЙ КОМПОНЕНТ (280 строк)
│   ├── layout.tsx
│   └── globals.css
│
├── components/               ← КОМПОНЕНТЫ ПРЕДСТАВЛЕНИЯ
│   ├── AnomalyModal.tsx
│   ├── StatusDisplay.tsx
│   ├── GraphControls.tsx
│   ├── LoadingOverlay.tsx
│   ├── AnalysisMethodSelector.tsx  ✨ НОВЫЙ
│   ├── GraphGrid.tsx              ✨ НОВЫЙ
│   └── ControlButtons.tsx         ✨ НОВЫЙ
│
├── hooks/                    ← ЛОГИКА И СОСТОЯНИЕ
│   ├── useWebSocket.ts            ✨ НОВЫЙ (145 строк)
│   │   └── Управление WebSocket, получение данных
│   ├── useDataSimulation.ts       ✨ НОВЫЙ (68 строк)
│   │   └── Симуляция потока данных
│   ├── useThresholds.ts          ✨ НОВЫЙ (67 строк)
│   │   └── Управление порогами анализа
│   └── index.ts                   ✨ НОВЫЙ
│
├── utils/                    ← ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ
│   ├── utils.ts               (форматирование, преобразования)
│   ├── fileUtils.ts          ✨ НОВЫЙ (47 строк)
│   │   └── analyzeFile, extractFlightStartTimeFromFile
│   └── thresholdUtils.ts     ✨ НОВЫЙ (43 строк)
│       └── buildParametersMessage, getThresholdKeysForMethod
│
├── types/
│   └── types.ts
│
└── public/
```

## Разделение ответственности

### 📄 page.tsx - Оркестратор (280 строк)

```typescript
// Управляет состоянием, координирует компоненты
// Содержит обработчики событий верхнего уровня
// Подключает хуки и компоненты
```

### 🎨 Компоненты (6 новых + 4 существующих)

```
AnalysisMethodSelector   → Выбор метода и порогов
GraphGrid               → Сетка графиков
ControlButtons          → Кнопки управления
```

### 🎣 Хуки (3 новых)

```
useWebSocket            → WebSocket логика (145 строк)
useDataSimulation       → Симуляция данных (68 строк)
useThresholds           → Управление порогами (67 строк)
```

### 🛠️ Утилиты (2 новых)

```
fileUtils              → Работа с файлами
thresholdUtils         → Помощники для порогов
```

## Сравнение "До" и "После"

| Аспект             | До      | После   |
| ------------------ | ------- | ------- |
| Строк в page.tsx   | 835     | 280     |
| Файлов             | 1       | 9       |
| Компонентов        | 1       | 4       |
| Хуков              | 0       | 3       |
| Утилит             | 1       | 3       |
| Переиспользуемость | Низкая  | Высокая |
| Тестируемость      | Сложная | Простая |

## Основные улучшения

✅ **Модульность** - Каждый файл отвечает за одно
✅ **Переиспользование** - Хуки можно применить в других местах
✅ **Читаемость** - Меньше кода, больше ясности
✅ **Поддерживаемость** - Легче добавлять функции
✅ **Тестирование** - Проще писать юнит-тесты
✅ **Производительность** - Оптимальная передача пропсов

## Быстрый старт с новой структурой

```typescript
// Использование нового компонента
import { AnalysisMethodSelector } from "@/components/AnalysisMethodSelector";

// Использование нового хука
import { useWebSocket } from "@/hooks/useWebSocket";

// Использование новой утилиты
import { analyzeFile } from "@/utils/fileUtils";
```

## Файл для документирования изменений

📋 See [REFACTORING_NOTES.md](./REFACTORING_NOTES.md) для подробной информации.
